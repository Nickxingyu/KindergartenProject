{
    "swagger":"2.0",
    "schemes":"http",
    "info":{
        "version":"1.0.0",
        "title":"KindergartenChiu"
    },
    "tags":[
        {
            "name":"User",
            "description":"User authorization or infomation"
        },
        {
            "name":"Child",
            "description":"Operations about child"
        },
        {
            "name":"Teacher",
            "description":"Operations about teacher"
        },
        {
            "name":"Driver",
            "description":"Operations about driver"
        },
        {
            "name":"PickupList",
            "description":"Operations about pickup list"
        }
    ],
    "consumes": [
        "application/json"
    ],
    "produces": [
        "application/json"
    ],
    "paths":{
        "/users/loginByPassword":{
            "post":{
                "tags":["User"],
                "parameters":[
                    {
                        "name":"body",
                        "type":"string",
                        "in":"body",
                        "required":"true",
                        "schema":{
                            "type":"object",
                            "properties":{
                                "phone":{
                                    "type":"string"
                                },
                                "password":{
                                    "type":"string"
                                }
                            }
                        }
                    }
                ],
                "responses":{
                    "200": {
                        "description": "OK",
                        "headers":{
                            "Authorization":{
                                "schema":{
                                    "type":"string"
                                },
                                "description":"Jwt sign by server apikey."
                            }
                        },
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad post",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/users/loginByVerificationCode":{
            "post":{
                "description":"透過驗證碼登入",
                "tags":["User"],
                "parameters":[
                    {
                        "name":"body",
                        "type":"string",
                        "in":"body",
                        "description":"If you don't have verification code, you shoud put phone in request body and get verification code from sns",
                        "schema":{
                            "type":"object",
                            "properties":{
                                "phone":{
                                    "type":"string"
                                },
                                "code":{
                                    "type":"string"
                                }
                            }
                        }
                    }
                ],
                "responses":{
                    "200": {
                        "description": "OK",
                        "headers":{
                            "Authorization":{
                                "schema":{
                                    "type":"string"
                                },
                                "description":"Jwt sign by apikey"
                            }
                        },
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token or post",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/users/modifyPassword":{
            "post":{
                "tags":["User"],
                "parameters":[
                    {
                        "name":"body",
                        "type":"string",
                        "in":"body",
                        "schema":{
                            "type":"object",
                            "properties":{
                                "phone":{
                                    "type":"string"
                                },
                                "code":{
                                    "type":"string"
                                },
                                "password":{
                                    "type":"string"
                                }
                            }
                        }
                    }
                ],
                "responses":{
                    "200": {
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token or post",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/child/add":{
            "post":{
                "tags":["Child"],
                "description":"新增學生資料",
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "name":{
                                "type":"string"
                            },
                            "address":{
                                "type":"string"
                            },
                            "class_number":{
                                "type":"string"
                            }
                        },
                        "in":"body"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/child/addParent":{
            "post":{
                "description":"新增家長資料",
                "tags":["Child"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },{
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "password":{
                                "type":"string"
                            },
                            "name":{
                                "type":"string"
                            },
                            "address":{
                                "type":"string"
                            }
                        },
                        "in":"body"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/child/location":{
            "get":{
                "description":"取得小孩位置及剩餘時間",
                "tags":["Child"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "type":"object",
                            "properties":{
                                "children":{
                                    "type":"array",
                                    "items":{
                                        "type":"object",
                                        "properties":{
                                            "uuid":{
                                                "type":"string"
                                            },
                                            "name":{
                                                "type":"string"
                                            },
                                            "location":{
                                                "type":"object",
                                                "properties":{
                                                    "lat":{
                                                        "type":"string",
                                                        "description":"latitude"
                                                    },
                                                    "lng":{
                                                        "type":"string",
                                                        "description":"longitude"
                                                    }
                                                }
                                            },
                                            "remaining_time":{
                                                "type":"string",
                                                "description":"second"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/child/arrive":{
            "post":{
                "description":"更新小孩狀態為已送達",
                "tags":["Child"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by teacher's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "child_uuid":{
                                "type":"array",
                                "items":{
                                    "type":"string"
                                }
                            }
                        },
                        "in":"body"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/child/allPickupChildren":{
            "get":{
                "description":"取得所有小孩資訊並依例行性接送單將小孩分為成兩組",
                "tags":["Child"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK, pickup 為長度為七（對應禮拜天到禮拜六）的陣列，其中每個元素為不限長度的陣列對應到娃娃車班次，其中每個元素為一個不限長度的陣列存放著該班次的小孩資訊\n 例如：pickup[1][0] 為星期一的第一班車中的小孩的資訊",
                        "schema": {
                            "type":"object",
                            "properties":{
                                "pickup":{
                                    "type":"array",
                                    "items":{
                                        "type":"array",
                                        "items":{
                                            "type":"array",
                                            "items":{
                                                "type":"object",
                                                "properties":{
                                                    "uuid":{
                                                        "type":"string"
                                                    },
                                                    "name":{
                                                        "type":"string"
                                                    },
                                                    "address":{
                                                        "type":"string"
                                                    },
                                                    "class_number":{
                                                        "type":"string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "no_pickup":{
                                    "type":"array",
                                    "items":{
                                        "type":"array",
                                        "items":{
                                            "type":"object",
                                            "properties":{
                                                "uuid":{
                                                    "type":"string"
                                                },
                                                "name":{
                                                    "type":"string"
                                                },
                                                "address":{
                                                    "type":"string"
                                                },
                                                "class_number":{
                                                    "type":"string"
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },"401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/child/modifyPickupDays":{
            "put":{
                "description":"改變學生例行性接送的時間",
                "tags":["Child"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "pickupDays_list":{
                                "type":"array",
                                "items":{
                                    "type": "object",
                                    "properties":{
                                        "uuid":{
                                            "type":"string"
                                        },
                                        "pickupDays":{
                                            "type":"array",
                                            "items":{
                                                "type":"boolean"
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "in":"body",
                        "description":"pickupDays_list中每個元素對應到一個小孩的uuid及長度為七的Array,從星期天(0)到星期六(6)表示是否要接送"
                    }
                ]
            }
        },
        "/teacher/add":{
            "post":{
                "description":"新增教師",
                "tags":["Teacher"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "password":{
                                "type":"string"
                            },
                            "name":{
                                "type":"string"
                            }
                        },
                        "in":"body"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/teacher/allTeacher":{
            "get":{
                "description":"取得所有教師資料",
                "tags":["Teacher"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/Teacher"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/driver/add":{
            "post":{
                "description":"新增司機",
                "tags":["Driver"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "password":{
                                "type":"string"
                            },
                            "name":{
                                "type":"string"
                            }
                        },
                        "in":"body"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/driver/allDriver":{
            "get":{
                "description":"取得所有司機資料",
                "tags":["Driver"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    }
                ],
                "responses": {
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/Driver"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/driver/checkListStatus":{
            "get":{
                "description":"取得當日行車檢查表是否已完成",
                "tags":["Driver"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    }
                ],
                "responses": {
                    "200":{
                        "description": "OK",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/driver/location":{
            "put":{
                "description":"更新司機位置及計算學生到家剩餘時間",
                "tags":["Driver"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "location":{
                                "type":"string"
                            }
                        },
                        "in":"body",
                        "description":"Driver's location format: '(lat),(lng)', example: '24.990750,121.294920' "
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK, and return json data of google directionResponse"
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/pickupList/generatePickupList":{
            "post":{
                "description":"新增或修改接送單",
                "tags":["PickupList"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "pickup_lists":{
                                "type":"array",
                                "items":{
                                    "type":"object",
                                    "properties":{
                                        "driver":{
                                            "type":"object",
                                            "properties":{
                                                "phone":{
                                                    "type":"string"
                                                },
                                                "location":{
                                                    "type":"string"
                                                }
                                            }
                                        },
                                        "teacher":{
                                            "type":"object",
                                            "properties":{
                                                "phone":{
                                                    "type":"string"
                                                }
                                            }
                                        },
                                        "child_list":{
                                            "type":"array",
                                            "items":{
                                                "type":"object",
                                                "properties":{
                                                    "uuid": {
                                                        "type":"string"
                                                    },
                                                    "name": {
                                                        "type":"string"
                                                    },
                                                    "address": {
                                                        "type":"string"
                                                    },
                                                    "class_number": {
                                                        "type":"string"
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        },
                        "in":"body"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "type":"object",
                            "properties":{
                                "pickup_lists":{
                                    "type":"array",
                                    "items":{
                                        "type":"object",
                                        "properties":{
                                            "uuid":{
                                                "type":"string"
                                            },
                                            "driver":{
                                                "type":"object",
                                                "properties":{
                                                    "phone":{
                                                        "type":"string"
                                                    },
                                                    "location":{
                                                        "type":"string"
                                                    }
                                                }
                                            },
                                            "teacher":{
                                                "type":"object",
                                                "properties":{
                                                    "phone":{
                                                        "type":"string"
                                                    }
                                                }
                                            },
                                            "child_list":{
                                                "type":"array",
                                                "items":{
                                                    "type":"object",
                                                    "properties":{
                                                        "uuid": {
                                                            "type":"string"
                                                        },
                                                        "name": {
                                                            "type":"string"
                                                        },
                                                        "address": {
                                                            "type":"string"
                                                        },
                                                        "class_number": {
                                                            "type":"string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/pickupList/generateDirection":{
            "post":{
                "description":"產生路線並記錄接送順序",
                "tags":["PickupList"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    },
                    {
                        "name":"body",
                        "type":"object",
                        "properties":{
                            "phone":{
                                "type":"string"
                            },
                            "location":{
                                "type":"string"
                            }
                        },
                        "in":"body",
                        "description":"Driver's location format: '(lat),(lng)', example: '24.990750,121.294920' "
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK, and return json data of google directionResponse"
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        },
        "/pickupList":{
            "get":{
                "description":"取得未完成的接送單",
                "tags":["PickupList"],
                "parameters":[
                    {
                        "name":"Authorization",
                        "type":"string",
                        "in":"header",
                        "description":"Jwt sign by user's apiKey"
                    }
                ],
                "responses":{
                    "200":{
                        "description": "OK",
                        "schema":{
                            "type":"object",
                            "properties":{
                                "pickup_lists":{
                                    "type":"array",
                                    "items":{
                                        "type":"object",
                                        "properties":{
                                            "uuid":{
                                                "type":"string"
                                            },
                                            "phone":{
                                                "type":"string"
                                            },
                                            "driver":{
                                                "type":"object",
                                                "properties":{
                                                    "phone":{
                                                        "type":"string"
                                                    },
                                                    "location":{
                                                        "type":"string"
                                                    }
                                                }
                                            },
                                            "teacher":{
                                                "type":"object",
                                                "properties":{
                                                    "phone":{
                                                        "type":"string"
                                                    }
                                                }
                                            },
                                            "child_list":{
                                                "type":"array",
                                                "items":{
                                                    "type":"object",
                                                    "properties":{
                                                        "uuid": {
                                                            "type":"string"
                                                        },
                                                        "name": {
                                                            "type":"string"
                                                        },
                                                        "address": {
                                                            "type":"string"
                                                        },
                                                        "class_number": {
                                                            "type":"string"
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                },
                                "no_pickup":{
                                    "type": "array",
                                    "items":{
                                        "type": "object",
                                        "properties":{
                                            "uuid": {
                                                "type":"string"
                                            },
                                            "name": {
                                                "type":"string"
                                            },
                                            "address": {
                                                "type":"string"
                                            },
                                            "class_number": {
                                                "type":"string"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "401":{
                        "decription": "Bad token",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    },
                    "500":{
                        "decription": "Server fail",
                        "schema":{
                            "$ref": "#/definitions/message"
                        }
                    }
                }
            }
        }
    },
    "definitions":{
        "Children":{
            "type": "array",
            "items":{
                "type": "object",
                "properties": {
                    "uuid": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "pickup":{
                        "type":"boolean"
                    }
                }
            }
        },
        "Teacher":{
            "type": "array",
            "items":{
                "type": "object",
                "properties":{
                    "uuid": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "phone":{
                        "type": "string"
                    }
                }
            }
        },
        "Driver":{
            "type": "array",
            "items":{
                "type": "object",
                "properties":{
                    "uuid": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "phone":{
                        "type": "string"
                    }
                }
            }
        },
        "message":{
            "type":"object",
            "properties":{
                "code":{
                    "type":"string"
                },
                "type":{
                    "type": "string"
                },
                "message":{
                    "type": "string"
                }
            }
        }
    }
}